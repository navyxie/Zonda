// Generated by CoffeeScript 1.6.3
var CONFIG, colors, fs, path, project_dir, sea, sea_config, sea_plugin_text;

require("js-yaml");

fs = require("fs");

path = require("path");

colors = require("colors");

console.log("\n\n Zonda Tool".bold + ":  Generate framework...");

project_dir = path.resolve('./', '../');

CONFIG = require("" + project_dir + "/etc/zonda.yml");

fs.readdir("" + project_dir + "/dist", function(err) {
  if (err !== null) {
    return fs.mkdirSync("" + project_dir + "/dist");
  }
});

console.log(("\n   Generate simple framework-" + CONFIG.version + ".js...:  ").bold + ("" + project_dir + "/dist"));

sea = fs.readFileSync("" + project_dir + "/vendor/Zonda/vendor/sea/" + CONFIG.sea_version + "/sea-debug.js");

sea_plugin_text = fs.readFileSync("" + project_dir + "/vendor/Zonda/vendor/sea/" + CONFIG.sea_version + "/seajs-text-debug.js");

sea_config = fs.readFileSync("" + project_dir + "/etc/seajs_config.js");

fs.writeFileSync("" + project_dir + "/dist/framework-" + CONFIG.version + ".js", sea + sea_plugin_text + sea_config);

console.log("   >>".bold + " Success!".green);
